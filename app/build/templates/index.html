{% extends "base.html" %}
{% block title %}Index{% endblock %}
{% block main %}
<canvas id="lineFrameTime" class="table table-responsive"></canvas>
<script>
    var ctx = document.getElementById("lineFrameTime");
    var myChart = new Chart(ctx, {
      type: 'line',
      data: {
          labels: [ {% for build in build_frame_time %}
                "{{loop.index}}",
              {% endfor %}],
          datasets:[{
              label: 'Average frame time per build',
              data: [
                  {% for build in build_frame_time %}
                    {{ build_frame_time[build] }},
                  {% endfor %}
                ],

              borderColor: [
                  'rgba(0,99,132,1)',
                  'rgba(1, 162, 235, 1)',
                  'rgba(255, 206, 86, 1)',
                  'rgba(75, 102, 192, 1)',
                  'rgba(153, 102, 255, 1)',
                  'rgba(255, 159, 64, 1)'
              ],
              borderWidth: 1
          }]
      },
      options: {
              scales: {
                  yAxes: [{
                    scaleLabel: {
                      display: true,
                      labelString: 'Time in microsoft'
                    },
                      ticks: {
                          beginAtZero:true
                      }
                  }],

                  xAxes: [{
                    scaleLabel: {
                      display: true,
                      labelString: 'Build number'
                    },
                      ticks: {
                          beginAtZero:true
                      }
                  }]
              }
          }
    });
  </script>
<canvas id="latestBuildTime" class="table table-responsive"></canvas>
<script>
  var ctx = document.getElementById("latestBuildTime");
  var myChart = new Chart(ctx, {
    type: 'horizontalBar',
    data: {
        labels: [ {% for data in last_build %}
              "{{data.name}}",
            {% endfor %}],
        datasets:[{
            label: 'Total frametime latest build',
            data: [
                {% for build in build_data %}
                  {{ build.samples }},
                {% endfor %}
              ],

            borderColor: [
                'rgba(0,99,132,1)',
                'rgba(1, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 102, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
            scales: {
                yAxes: [{
                  scaleLabel: {
                    display: true,
                    labelString: 'Functioname'
                  },
                    ticks: {
                        beginAtZero:true
                    }
                }],

                xAxes: [{
                  scaleLabel: {
                    display: true,
                    labelString: 'Frame time in microsoft'
                  },
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        }
  });
</script>
<table class="table table-responsive">
  <thead>
    <tr>
      <th scope="col">Jenkins build number</th>
      <th scope="col">Function name</th>
      <th scope="col">Average execution time</th>
    </tr>
  </thead>
  <tbody>
    {% for build in build_data %}
    <tr>
      <th scope="row"><a href="http://192.168.1.141:8080/job/SSP/{{build.build}}/">{{build.build}}</th>
      <th>{{build.name}}</th>
      <th>{{build.samples}}</th>
    </tr>
    {% endfor %}
  </tbody>
</table>
<div class="starter-template">
  <h1>Bootstrap starter template</h1>
  <p class="lead">Use this document as a way to quickly start any new project.<br> All you get is this text and a mostly barebones HTML document.</p>
</div>
{% endblock %}
